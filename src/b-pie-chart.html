<element name="b-pie-chart">
    <style>
    </style>
    <script src="../node_modules/d3/d3.js"></script>
    <script>
    var color = d3.scale.category20c();

    ({
        set data(data) {
            this._data = data;
            this._render();
        },

        get radius() {
            return ~~this.getAttribute('radius') || 100;
        },

        createdCallback: function() {
        },

        _render: function() {
            var pie = d3.select(this).selectAll("svg")
                .data(this._data)
                .enter().append("svg:svg")
                .attr("width", (this.radius) * 2)
                .attr("height", (this.radius) * 2)
                .append("svg:g").attr("transform", "translate(" + (this.radius) + "," + (this.radius) + ")");

            pie.selectAll("path")
                .data(d3.layout.pie())
                .enter().append("svg:path")
                .attr("d", d3.svg.arc()
                    .outerRadius(this.radius))
                .style("fill", function(d, i) {
                    return color(i);
                });
        }
    });
    </script>
</element>
